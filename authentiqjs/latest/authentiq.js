/*!
 * Authentiq JS snippet v0.1.1-1
 *
 * Authentiq JS Snippet for adding a button in a website
 *
 *
 * @author The Authentiq team
 * @website http://authentiq.io
 *
 * @copyright Authentiq 2016
 * @license under MIT (https://github.com/AuthentiqID/authentiq-js/blob/master/LICENSE)
 */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function r(r){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function t(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(r){o[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(r){return!1}}var e=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;module.exports=t()?Object.assign:function(t,o){for(var c,a,i=r(t),s=1;s<arguments.length;s++){c=Object(arguments[s]);for(var b in c)e.call(c,b)&&(i[b]=c[b]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(c);for(var f=0;f<a.length;f++)n.call(c,a[f])&&(i[a[f]]=c[a[f]])}}return i};
},{}],2:[function(require,module,exports){
"use strict";function r(r,t){return t.encode?t.strict?e(r):encodeURIComponent(r):r}var e=require("strict-uri-encode"),t=require("object-assign");exports.extract=function(r){return r.split("?")[1]||""},exports.parse=function(r){var e=Object.create(null);return"string"!=typeof r?e:(r=r.trim().replace(/^(\?|#|&)/,""))?(r.split("&").forEach(function(r){var t=r.replace(/\+/g," ").split("="),n=t.shift(),i=t.length>0?t.join("="):void 0;n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),void 0===e[n]?e[n]=i:Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]}),e):e},exports.stringify=function(e,n){var i={encode:!0,strict:!0};return n=t(i,n),e?Object.keys(e).sort().map(function(t){var i=e[t];if(void 0===i)return"";if(null===i)return r(t,n);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(e){void 0!==e&&(null===e?o.push(r(t,n)):o.push(r(t,n)+"="+r(e,n)))}),o.join("&")}return r(t,n)+"="+r(i,n)}).filter(function(r){return r.length>0}).join("&"):""};
},{"object-assign":1,"strict-uri-encode":4}],3:[function(require,module,exports){
!function(n,e,t){"undefined"!=typeof module?module.exports=t(n,e):"function"==typeof define&&"object"==typeof define.amd?define(t):e[n]=t(n,e)}("radio",this,function(n,e){"use strict";function t(n){return arguments.length?t.$.channel(n):t.$.reset(),t.$}return t.$={version:"0.2",channelName:"",channels:[],reset:function(){t.$.channelName="",t.$.channels=[]},broadcast:function(){var n,t,h,i,c=this.channels[this.channelName].slice(),s=c.length;for(n=0;n<s;n++)t=c[n],"object"==typeof t&&t.length&&(h=t[0],i=t[1]||e),h.apply(i,arguments);return this},channel:function(n){var e=this.channels;return e[n]||(e[n]=[]),this.channelName=n,this},subscribe:function(){var n,e,t=arguments,h=this.channels[this.channelName],i=t.length,c=[];for(n=0;n<i;n++)c=t[n],e="function"==typeof c?[c]:c,"object"==typeof e&&e.length&&h.push(e);return this},unsubscribe:function(){var n,e,t,h=arguments,i=this.channels[this.channelName],c=h.length,s=i.length,a=0;for(n=0;n<c;n++)for(a=0,s=i.length,e=0;e<s;e++)t=e-a,i[t][0]===h[n]&&(i.splice(t,1),a++);return this}},t});
},{}],4:[function(require,module,exports){
"use strict";module.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})};
},{}],5:[function(require,module,exports){
"use strict";function e(e){var t,r=e||{};if(o=window.authentiq,n=o._defaults._storage,s=o._defaults.provider,this.options=Object.assign({},o._defaults.button,r),document.getElementById("authentiq-session-frame")&&(c=!0),!c&&!u){u=!0;var d=document.createElement("style");d.className="authentiq-styles",d.innerHTML=l(),document.getElementsByTagName("head")[0].appendChild(d)}var p=["state","nonce"];for(t in p)"undefined"!=typeof this.options[p[t]]&&""!==this.options[p[t]]||(this.options[p[t]]=i.generateNonce(8)||"");if("undefined"!=typeof this.options.scope&&""!==this.options.scope&&this.options.scope.indexOf("openid")===-1&&(this.options.scope+=" openid"),"undefined"==typeof this.options.redirect_uri||""===this.options.redirect_uri)this.options.response_mode="fragment",this.options.redirect_uri=window.location.href.split("#")[0];else if(!/^https?:\/\//i.test(this.options.redirect_uri)){var a="/"!==this.options.redirect_uri[0]?"/":"";this.options.redirect_uri=window.location.origin+a+this.options.redirect_uri}}var t=require("query-string"),i=require("./utils"),o,n,s,r,d,p,a={required_opts:["response_type","response_mode","client_id","redirect_uri","state"],optional_opts:["scope","nonce","display","prompt","ui_locales","display_errors"]},u=!1,c=!1,l=function(){return".authentiq-modal{position:fixed;left:0;top:0;width:100%;height:100%;z-index:9998;background-color:rgba(0,0,0,.3);transition:all .8s ease-in-out}#authentiq-session-frame{position:fixed;left:50%;top:50%;width:450px;height:660px;margin-top:-300px;margin-left:-225px;z-index:9999;}@media only screen and (max-width: 400px){#authentiq-session-frame{width:90vw;margin-left:-45vw;}}"},h=function(e,t){var i="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,o="undefined"!=typeof window.screenY?window.screenY:window.screenTop,n="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,s="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,r=i<0?window.screen.width+i:i,d=parseInt(r+(n-e)/2,10),p=parseInt(o+(s-t)/2.5,10);return"width="+e+",height="+t+",left="+d+",top="+p+","},f=function(){"undefined"!=typeof p&&p.parentNode.removeChild(p),p=void 0,d=void 0};e.prototype.authorizeURL=function(e){var i,o,n={},r=e||{},d=a.required_opts.concat(a.optional_opts);i=Object.assign({},this.options,r);for(o in d)a.optional_opts.indexOf(d[o])>-1&&""===i[d[o]]||(n[d[o]]=i[d[o]]||s[d[o]]);return s.provider_uri+s.authorize_path+"?"+t.stringify(n)},e.prototype.signIn=function(e){"undefined"!=typeof e&&e.preventDefault(),localStorage.setItem(n.state,this.options.state),localStorage.setItem(n.nonce,this.options.nonce),"page"===this.options.display?window.location.href=this.authorizeURL():"popup"===this.options.display?"undefined"==typeof o.popup_window||o.popup_window.closed?(o.handlePopupCallback=function(e){o.handlePopupCallback=void 0,o.popup_window=void 0,i.setEventHistory(e),i.fireEventsFromHistory()},o.popup_window=window.open(this.authorizeURL(),"Authentiq Connect",h(450,660)+"scrollbars=1,location=0,toolbar=0,status=0,menubar=0,personalbar=0,resizable=0,dependent=1,dialog=0,close=1,modal=1")):o.popup_window.focus():(o.handleModalCallback=function(e){f(),o.handleModalCallback=void 0,i.setEventHistory(e),i.fireEventsFromHistory()},c?document.getElementById("authentiq-session-frame").src=this.authorizeURL():(p=document.createElement("div"),p.className="authentiq-modal",d=document.createElement("iframe"),d.setAttribute("frameBorder","0"),d.id="authentiq-session-frame",d.src=this.authorizeURL(),p.appendChild(d),document.body.appendChild(p)))},module.exports=e;
},{"./utils":12,"query-string":2}],6:[function(require,module,exports){
"use strict";require("./polyfills.js");var e=require("radio"),t=require("./utils"),i=require("./api"),n=require("./button"),r=require("./provider"),o=require("./token"),a=require("./session"),s;!function(s,u){s._defaults={_storage:{state:"authentiq.request_state",nonce:"authentiq.request_nonce",id_token:"authentiq.id_token",session_state:"authentiq.session_state"},direct_events:!1,provider:{provider_uri:"https://connect.authentiq.io",authorize_path:"/authorize",end_session_path:"/authorize/logout",check_session_iframe:"/authorize/iframe",client_id:"",signed_in:null},button:{response_type:"id_token",response_mode:"fragment",redirect_uri:"",scope:"",state:"",nonce:"",display:"modal",prompt:"",ui_locales:"",display_errors:"",sign_in_text:"Sign in",sign_out_text:"Sign out",sign_out_claim:"first_name name email phone_number",theme:"basic"}},"defaults"in s&&("undefined"!=typeof s.defaults.direct_events&&(s._defaults.direct_events=!0),s._defaults.provider=Object.assign({},s._defaults.provider,s.defaults.provider),s._defaults.button=Object.assign({},s._defaults.button,s.defaults.button),delete s.defaults);var d,l,_,p,c=document.querySelector(".authentiq-snippet");if(c){_=["provider","button"];for(p in _)for(d in s._defaults[_[p]])l="data-"+d.split("_").join("-"),c.hasAttribute(l)&&(s._defaults[_[p]][d]=c.getAttribute(l));c.hasAttribute("data-direct-events")&&(s._defaults.direct_events=!0)}"/"===s._defaults.provider.provider_uri.substr(-1)&&(s._defaults.provider.provider_uri=s._defaults.provider.provider_uri.slice(0,-1)),_=["authorize_path","end_session_path","check_session_iframe"];for(p in _)"/"!==s._defaults.provider[_[p]][0]&&(s._defaults.provider[_[p]]="/"+s._defaults.provider[_[p]]);if(s._defaults.provider.signed_in=/(true|yes|1)/i.test(s._defaults.provider.signed_in),s.Event=function(t){return e("aq:"+t)},s.subscribe=function(e,t){s.Event(e).subscribe(t)},s.Token=new o,s.Provider=new r,window.opener)try{window.opener.authentiq&&window.opener.authentiq.handlePopupCallback&&window.opener.authentiq.handlePopupCallback(t.getEventHistory());try{window.close()}catch(e){}return void t.on(window,"load",function(){window.close()})}catch(e){}if(window.parent&&window.parent.authentiq&&window.parent.authentiq.handleModalCallback)try{return void window.parent.authentiq.handleModalCallback(t.getEventHistory())}catch(e){}s.popup_window=u,s.handlePopupCallback=u,s.handleModalCallback=u,s.API=i,s._API=new i,s.signIn=s._API.signIn.bind(s._API),s.signOut=s.Provider.signOut,s.Button=n,s.Session=new a,t.on(document,"DOMContentLoaded",function(){s.init()}),s.init=function(e,i){if("undefined"!=typeof e)new n(e,i);else{var r=document.querySelectorAll(".authentiq-button");c&&/(true|yes|1)/i.test((c.getAttribute("data-button")||"").toLowerCase())&&new n(c,i);for(var o=0,a=r.length;o<a;o++)new n(r[o],i)}t.fireEventsFromHistory()},module.exports=s}(window.authentiq=window.authentiq||{});
},{"./api":5,"./button":7,"./polyfills.js":8,"./provider":9,"./session":10,"./token":11,"./utils":12,"radio":3}],7:[function(require,module,exports){
"use strict";function t(t,c){var l,g,b,m=c||{};if("undefined"===t||!t.hasAttribute("data-authentiq-button")){if(this.id=Math.floor(9e3*Math.random())+1e3,e=window.authentiq,s=e._defaults.button,o=e._defaults._storage,n=e._defaults.provider,r=e._API,a=e.Provider,this.authorizeURL=r.authorizeURL,this.signIn=r.signIn,!h){h=!0;var v=document.querySelector(".authentiq-styles");v&&(v.innerText+=u())}d.apply(this),this.options=Object.assign({},s,m);for(l in this.options)g="data-"+l.split("_").join("-"),t.hasAttribute(g)&&(this.options[l]=t.getAttribute(g));this.options.sign_in_text===s.sign_in_text&&"script"!==t.tagName.toLowerCase()&&""!==t.innerHTML.trim()&&(this.options.sign_in_text=t.innerHTML.trim());var _=["state","nonce"];for(b in _)""===this.options[_[b]]&&(this.options[_[b]]=i.generateNonce(8)||"");if(""!==this.options.scope&&this.options.scope.indexOf("openid")===-1&&(this.options.scope+=" openid"),""===this.options.redirect_uri)this.options.response_mode="fragment",this.options.redirect_uri=window.location.href.split("#")[0];else if(!/^https?:\/\//i.test(this.options.redirect_uri)){var x="/"!==this.options.redirect_uri[0]?"/":"";this.options.redirect_uri=window.location.origin+x+this.options.redirect_uri}"script"===t.tagName.toLowerCase()?(this.scriptTag=t,this.renderButton()):this.el=t,this.el.className.indexOf("authentiq-button")===-1&&(this.el.className+=" authentiq-button"),this.options.theme&&"none"!==this.options.theme&&(this.el.className+=" authentiq-button-style "+this.options.theme+"-theme"),this.el.setAttribute("data-authentiq-button",this.id),a.isSignedIn()?p.apply(this):f.apply(this)}}var i=require("./utils"),e,s,o,n,r,a,c,h=!1,l=function(t){var i="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 27' width='30' height='27'><path id='aq-logo-bg' style='fill:"+t[3]+"' d='M30 18.4c0 .7-.4 1.4-.8 1.7l-13.6 7H14L.8 20c-.4 0-.8-1-.8-1.5v-10C0 8 .4 7.3.8 7L14 0c.4-.3 1.2-.3 1.6 0l13.6 7c.4.2.8 1 .8 1.6v9.8z'/><path id='aq-logo-a' style='fill:"+t[4]+"' d='M11 13.7c0-1.8 1.3-3.3 3-3.3s3 1.5 3 3.3c0 1.8-1.3 3.2-3 3.2s-3-1.7-3-3.5zm11.5 3H22c-.4 0-1-.2-1-.4-.3 0-.5-.4-.5-.8V7.7h-3.2V9c-.5-.5-1-.8-1.7-1-.6-.3-1.5-.5-2.3-.5-1 0-1.7.2-2.4.5-1 .3-1.6.8-2 1.3-.6.6-1 1.2-1 2-.6.7-.7 1.5-.7 2.3 0 1 0 1.7.4 2.4.2.7.6 1.4 1 2 .6.5 1.2 1 2 1.3.6.3 1.4.5 2.3.5 1 0 1.8-.2 2.5-.6.7-.3 1.2-.8 1.7-1.5.3.6.7 1 1.3 1.5.5.4 1 .6 1.8.6.5 0 1 0 1.5-.2l.5-.2v-2.8z'/></svg>";return i.replace(/"/g,"'").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\s+/g," ")},u=function(){var t,i={basic:["#895fc0","#fff","#6a3fa1","#fff","#f05023"],orange:["#f05023","#fff","#cd380e","#fff","#f05023"],grey:["#afb6bb","#333","#919aa1","#fff","#f05023"],white:["#fff","#444","#d4d4d4","#f05023","#fff"]},e="";e+=".authentiq-button-style{padding:8px 8px 8px 46px;min-height:40px;background-color:"+i.basic[0]+';background-image:url("data:image/svg+xml;charset=utf8,'+l(i.basic)+'") !important;background-size: 31px 28px !important;background-position: 8px center !important;background-repeat: no-repeat !important;color:'+i.basic[1]+';display:inline-block;border:0 none;border-radius:5px;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:600;letter-spacing:.016em}.authentiq-button-style:hover,.authentiq-button-style:focus{background-color:'+i.basic[2]+";color:"+i.basic[1]+"}";for(t in i)"basic"!=t&&(e+=".authentiq-button-style."+t+"-theme{background-color:"+i[t][0]+";color:"+i[t][1]+";"+(i.basic[3]!==i[t][3]||i.basic[4]!==i[t][4]?'background-image: url("data:image/svg+xml;charset=utf8,'+l(i[t])+'") !important;':"")+"}.authentiq-button-style."+t+"-theme:hover,.authentiq-button-style."+t+"-theme:focus{background-color:"+i[t][2]+";color:"+i[t][1]+"}");return e},p=function(t){t=t||{};var e,s=this.options.sign_out_claim.split(" "),o=this.options.sign_out_text;for(e in s)if(t[s[e]]){o+=" "+t[s[e]];break}this.el.innerHTML=o,i.off(this.el,"click",a.signOut,this),i.off(this.el,"click",r.signIn,this),i.on(this.el,"click",a.signOut,this)},f=function(){this.el.innerHTML=this.options.sign_in_text,i.off(this.el,"click",a.signOut,this),i.off(this.el,"click",r.signIn,this),i.on(this.el,"click",r.signIn,this)},d=function(){e.Event("profile").subscribe([p,this]),e.Event("concluded").subscribe([f,this])};t.prototype.renderButton=function(){this.el=document.createElement("button"),this.scriptTag.parentNode.insertBefore(this.el,this.scriptTag)},module.exports=t;
},{"./utils":12}],8:[function(require,module,exports){
var t=require("./utils"),e;if(Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),Function.prototype.bind||(Function.prototype.bind=function(t){function e(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var o=[].slice,r=o.call(arguments,1),n=this,i=function(){return n.apply(this instanceof e?this:t||window,r.concat(o.call(arguments)))};return e.prototype=this.prototype,i.prototype=new e,i}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(void 0!==r&&null!==r){r=Object(r);for(var n=Object.keys(Object(r)),i=0,a=n.length;i<a;i++){var c=n[i],l=Object.getOwnPropertyDescriptor(r,c);void 0!==l&&l.enumerable&&(e[c]=r[c])}}}return e}}),"object"==typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(t){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){}}
},{"./utils":12}],9:[function(require,module,exports){
"use strict";function e(e){o=window.authentiq,a=o._defaults._storage,i=o.Token,r=o.Event,u.call(this),r("profile").subscribe([this.updateBindedElements,this]),this.profile()}var t=require("query-string"),n=require("./utils"),o,i,r,a,d,s,c,u=function(){var e,o,r,d,s=["hash","search"];for(var c in s)if(location[s[c]])if(e=t.parse(location[s[c]])||{},"error"in e)n.addEventInHistory("error",{error:e.error,error_description:e.error_description||null});else if("state"in e&&("id_token"in e||"access_token"in e||"code"in e)){o=localStorage.getItem(a.state),e.state===o?(i.setSessionState(e.session_state),"id_token"in e&&(r=localStorage.getItem(a.nonce),d=p(e.id_token),"undefined"!=typeof d&&(i.setIDToken(e.id_token),n.addEventInHistory("authorized:id_token",e.id_token),"undefined"!=typeof d.nonce&&d.nonce==r||n.addEventInHistory("error",{error:"client_error",error_description:"Invalid nonce in ID Token."}))),"token_type"in e&&"access_token"in e&&n.addEventInHistory("authorized:access_token",{token_type:e.token_type,access_token:e.access_token,expires_in:parseInt(e.expires_in,0)||0}),"code"in e&&n.addEventInHistory("authorized:code",e.code),n.addEventInHistory("authorized",e)):n.addEventInHistory("error",{error:"client_error",error_description:"Invalid state in authorization response."}),localStorage.removeItem(a.state),localStorage.removeItem(a.nonce),"hash"==s[c]&&l();break}},l=function(){var e,t,n=window.location;"pushState"in history?history.replaceState("",document.title,n.pathname+n.search):(e=document.body.scrollTop,t=document.body.scrollLeft,n.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)},p=function(e){var t=e?n.decodeJWT(e):void 0;return t?t.payload:void 0},f=function(){if("undefined"==typeof s&&(s=p(i.getIDToken()),"undefined"!=typeof s)){c=s.exp||void 0;var e=["iss","sub","aud","exp","iat","nbf","auth_time","nonce","acr","amr","azp","jti","at_hash","idp","_claim_names","_claim_sources"];e.forEach(function(e){delete s[e]})}if("undefined"!=typeof s){var t=Math.floor(+new Date/1e3);if("undefined"==typeof c||t>=c)return this.signOut(),void y()}return s},y=function(){"undefined"!=typeof o.Session&&o.Session.revokeAccess.apply(o.Session)};e.prototype.isSignedIn=function(){var e=o._defaults.provider.signed_in||!1;return e||!!f.apply(this)},e.prototype.profile=function(){var e=f.apply(this);return"undefined"!=typeof e&&n.addEventInHistory("profile",e),e},e.prototype.updateBindedElements=function(){var e,t,n,o=f.apply(this);for(e=document.querySelectorAll("[data-authentiq-profile-bind]"),t=0;t<e.length;++t)n=e[t].dataset.authentiqProfileBind||"",o[n]&&("undefined"!=typeof e[t].value?e[t].value=o[n]:e[t].innerHTML=o[n])},e.prototype.signOut=function(e){"undefined"!=typeof e&&(e.preventDefault(),y()),i.destroy(),s=void 0,r("concluded").broadcast()},module.exports=e;
},{"./utils":12,"query-string":2}],10:[function(require,module,exports){
"use strict";function e(){i=window.authentiq,this.init(),i.Event("concluded").subscribe([this.destroy,this])}var t=require("./utils"),i,n,o,s,r,c=["concluded"],d;e.prototype.init=function(){i.Provider.isSignedIn()&&i.Token.getSessionState()?(i.Event("profile").unsubscribe(this.init),n=i._defaults.provider,o=i.Token,r=n.provider_uri,d=this.renderOPFrame().contentWindow,t.on(window,"message",this.receiveMessage,this)):i.Event("profile").unsubscribe(this.init).subscribe([this.init,this])},e.prototype.destroy=function(){t.off(window,"message",this.receiveMessage,this),this.init()},e.prototype.renderOPFrame=function(){var e,i,o=this.postMessage;if(i=document.querySelector(".opframe"))return i.src=n.provider_uri+n.check_session_iframe,i;e=document.createElement("iframe"),e.setAttribute("frameBorder","0"),e.style.display="none",e.onload=function(){d=this.contentWindow,o()},e.className="opframe",e.src=n.provider_uri+n.check_session_iframe;try{document.body.appendChild(e)}catch(i){t.on(document,"DOMContentLoaded",function(){(document.body||document.documentElement).appendChild(e)})}return e},e.prototype.revokeAccess=function(){this.postMessage("concluded")},e.prototype.postMessage=function(e){var t=n.client_id+" "+o.getSessionState();"undefined"!=typeof e&&c.indexOf(e)>-1&&(t+=" "+e);try{d.postMessage(t,r)}catch(e){}},e.prototype.receiveMessage=function(e){var t;e.origin===r&&e.source==d&&(t=e.data,"changed"===t||"concluded"===t&&i.Provider.signOut())},module.exports=e;
},{"./utils":12}],11:[function(require,module,exports){
"use strict";function t(){o=window.authentiq,s=o._defaults._storage}var e=require("./utils"),o,s,n;t.prototype.setIDToken=function(t){localStorage.setItem(s.id_token,t)},t.prototype.getIDToken=function(){return localStorage.getItem(s.id_token)||void 0},t.prototype.setSessionState=function(t){localStorage.setItem(s.session_state,t)},t.prototype.getSessionState=function(){return localStorage.getItem(s.session_state)||void 0},t.prototype.destroy=function(){localStorage.removeItem(s.id_token),localStorage.removeItem(s.session_state)},module.exports=t;
},{"./utils":12}],12:[function(require,module,exports){
function e(e){return btoa(unescape(encodeURIComponent(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function t(e){return e+=Array(5-(e.length%4||4)).join("="),e=e.replace(/\-/g,"+").replace(/_/g,"/"),decodeURIComponent(escape(atob(e)))}var n=require("radio"),o,r,a={},i=[];module.exports={log:function(){},on:function(e,t,n,o){var r,i=o?function(e){n.apply(o,[e])}:n;r="getAttribute"in e?e.getAttribute("data-authentiq-button"):e,"undefined"!=typeof r&&("undefined"==typeof a[t]&&(a[t]={}),"undefined"==typeof a[t][r]&&(a[t][r]={}),a[t][r][n]=i),document.addEventListener?e.addEventListener(t,i,!1):document.attachEvent&&e.attachEvent("on"+t,i)},off:function(e,t,n,o){var r,i;r="getAttribute"in e?e.getAttribute("data-authentiq-button"):e,"undefined"!=typeof a[t]&&"undefined"!=typeof a[t][r]&&"undefined"!=typeof a[t][r][n]&&(i=a[t][r][n],document.removeEventListener?e.removeEventListener(t,i,!1):document.detachEvent&&e.detachEvent("on"+t,i),delete a[t][r][n])},addEventInHistory:function(e,t){if(e="aq:"+e,authentiq._defaults.direct_events&&!(window.parent&&window.parent.authentiq&&window.parent.authentiq.handleModalCallback)&&!(window.opener&&window.opener.authentiq&&window.opener.authentiq.handlePopupCallback))return void n(e).broadcast(t);var o={name:e,data:t};i.push(o)},setEventHistory:function(e){i=e},getEventHistory:function(){return i},fireEventsFromHistory:function(){if(i.length>0)for(var e in i)n(i[e].name).broadcast(i[e].data);i=[]},generateNonce:function(t){var n=window.crypto||window.msCrypto;if(n&&"function"==typeof n.getRandomValues&&("function"==typeof Uint8Array||"object"==typeof Uint8Array)){var o=new Uint8Array(t||16);n.getRandomValues(o);var r=Array.prototype.map.call(o,function(e){return String.fromCharCode(e)}).join("");return e(r)}},decodeJWT:function(e){var o=e?e.split("."):[];if(3!==o.length)return void n("aq:error").broadcast({error:"client_error",error_description:"Failed to decode ID Token."});var r=o[0],a=o[1],i=o[2],d=JSON.parse(t(r))||void 0,u=JSON.parse(t(a))||void 0;return{header:d,payload:u,signature:i}}};
},{"radio":3}]},{},[6]);
