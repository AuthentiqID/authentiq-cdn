/*!
 * Authentiq JS snippet v0.1.1-3
 *
 * Authentiq JS Snippet for adding a button in a website
 *
 *
 * @author The Authentiq team
 * @website http://authentiq.io
 *
 * @copyright Authentiq 2017
 * @license under MIT (https://github.com/AuthentiqID/authentiq-js/blob/master/LICENSE)
 */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function r(r){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function t(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(r){o[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(r){return!1}}var e=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;module.exports=t()?Object.assign:function(t,o){for(var c,a,i=r(t),s=1;s<arguments.length;s++){c=Object(arguments[s]);for(var b in c)e.call(c,b)&&(i[b]=c[b]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(c);for(var f=0;f<a.length;f++)n.call(c,a[f])&&(i[a[f]]=c[a[f]])}}return i};
},{}],2:[function(require,module,exports){
"use strict";function r(r,t){return t.encode?t.strict?e(r):encodeURIComponent(r):r}var e=require("strict-uri-encode"),t=require("object-assign");exports.extract=function(r){return r.split("?")[1]||""},exports.parse=function(r){var e=Object.create(null);return"string"!=typeof r?e:(r=r.trim().replace(/^(\?|#|&)/,""))?(r.split("&").forEach(function(r){var t=r.replace(/\+/g," ").split("="),n=t.shift(),i=t.length>0?t.join("="):void 0;n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),void 0===e[n]?e[n]=i:Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]}),e):e},exports.stringify=function(e,n){var i={encode:!0,strict:!0};return n=t(i,n),e?Object.keys(e).sort().map(function(t){var i=e[t];if(void 0===i)return"";if(null===i)return r(t,n);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(e){void 0!==e&&(null===e?o.push(r(t,n)):o.push(r(t,n)+"="+r(e,n)))}),o.join("&")}return r(t,n)+"="+r(i,n)}).filter(function(r){return r.length>0}).join("&"):""};
},{"object-assign":1,"strict-uri-encode":4}],3:[function(require,module,exports){
!function(n,e,t){"undefined"!=typeof module?module.exports=t(n,e):"function"==typeof define&&"object"==typeof define.amd?define(t):e[n]=t(n,e)}("radio",this,function(n,e){"use strict";function t(n){return arguments.length?t.$.channel(n):t.$.reset(),t.$}return t.$={version:"0.2",channelName:"",channels:[],reset:function(){t.$.channelName="",t.$.channels=[]},broadcast:function(){var n,t,h,i,c=this.channels[this.channelName].slice(),s=c.length;for(n=0;n<s;n++)t=c[n],"object"==typeof t&&t.length&&(h=t[0],i=t[1]||e),h.apply(i,arguments);return this},channel:function(n){var e=this.channels;return e[n]||(e[n]=[]),this.channelName=n,this},subscribe:function(){var n,e,t=arguments,h=this.channels[this.channelName],i=t.length,c=[];for(n=0;n<i;n++)c=t[n],e="function"==typeof c?[c]:c,"object"==typeof e&&e.length&&h.push(e);return this},unsubscribe:function(){var n,e,t,h=arguments,i=this.channels[this.channelName],c=h.length,s=i.length,a=0;for(n=0;n<c;n++)for(a=0,s=i.length,e=0;e<s;e++)t=e-a,i[t][0]===h[n]&&(i.splice(t,1),a++);return this}},t});
},{}],4:[function(require,module,exports){
"use strict";module.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})};
},{}],5:[function(require,module,exports){
"use strict";function e(e){var o,r=e||{};if(i=window.authentiq,n=i._defaults._storage,s=i._defaults.provider,this.options=Object.assign({},i._defaults.button,r),document.getElementById("authentiq-session-frame")&&(l=!0),!l&&!p){p=!0;var d=document.createElement("style");d.className="authentiq-styles",d.innerHTML=u(),document.getElementsByTagName("head")[0].appendChild(d)}var a=["state","nonce"];for(o in a)"undefined"!=typeof this.options[a[o]]&&""!==this.options[a[o]]||(this.options[a[o]]=t.generateNonce(8)||"");if("undefined"!=typeof this.options.scope&&""!==this.options.scope&&this.options.scope.indexOf("openid")===-1&&(this.options.scope+=" openid"),"undefined"==typeof this.options.redirect_uri||""===this.options.redirect_uri)this.options.response_mode="fragment",this.options.redirect_uri=window.location.href.split("#")[0];else if(!/^https?:\/\//i.test(this.options.redirect_uri)){var c="/"!==this.options.redirect_uri[0]?"/":"";this.options.redirect_uri=window.location.origin+c+this.options.redirect_uri}}var o=require("query-string"),t=require("./utils"),i,n,s,r,d,a={required_opts:["response_type","response_mode","client_id","redirect_uri","state"],optional_opts:["scope","nonce","display","prompt","ui_locales","display_errors"]},p=!1,l=!1,u=function(){return"#authentiq-session-frame{position:fixed;left:0;top:0;width:100%;height:100%;z-index:9998;}.aq-noscroll{position: fixed !important;overflow: hidden !important;left: 0;right: 0;}"},c=function(e,o){var t="undefined"!=typeof window.screenX?window.screenX:window.screenLeft,i="undefined"!=typeof window.screenY?window.screenY:window.screenTop,n="undefined"!=typeof window.outerWidth?window.outerWidth:document.documentElement.clientWidth,s="undefined"!=typeof window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,r=t<0?window.screen.width+t:t,d=parseInt(r+(n-e)/2,10),a=parseInt(i+(s-o)/2.5,10);return"width="+e+",height="+o+",left="+d+",top="+a+","},f=function(){"undefined"!=typeof d&&d.parentNode.removeChild(d),t.removeClass(document.body,"aq-noscroll"),d=void 0};e.prototype.authorizeURL=function(e){var t,i,n={},r=e||{},d=a.required_opts.concat(a.optional_opts);t=Object.assign({},this.options,r);for(i in d)a.optional_opts.indexOf(d[i])>-1&&""===t[d[i]]||(n[d[i]]=t[d[i]]||s[d[i]]);return s.provider_uri+s.authorize_path+"?"+o.stringify(n)},e.prototype.signIn=function(e){"undefined"!=typeof e&&e.preventDefault(),localStorage.setItem(n.state,this.options.state),localStorage.setItem(n.nonce,this.options.nonce);var o=t.isMobileBrowser();if("page"===this.options.display||o)window.location.href=this.authorizeURL();else if("popup"===this.options.display)"undefined"==typeof i.popup_window||i.popup_window.closed?(i.handlePopupCallback=function(e){i.handlePopupCallback=void 0,i.popup_window=void 0,t.setEventHistory(e),t.fireEventsFromHistory()},i.popup_window=window.open(this.authorizeURL(),"Authentiq Connect",c(450,700)+"scrollbars=1,location=0,toolbar=0,status=0,menubar=0,personalbar=0,resizable=0,dependent=1,dialog=0,close=1,modal=1")):i.popup_window.focus();else if(i.handleModalCallback=function(e){f(),i.handleModalCallback=void 0,t.setEventHistory(e),t.fireEventsFromHistory()},t.addClass(document.body,"aq-noscroll"),l){var s=document.getElementById("authentiq-session-frame");s.src=this.authorizeURL(),s.scrollTop=0}else d=document.createElement("iframe"),d.setAttribute("frameBorder","0"),d.setAttribute("sandbox","allow-scripts allow-forms allow-pointer-lock allow-popups allow-top-navigation allow-same-origin"),d.id="authentiq-session-frame",d.src=this.authorizeURL(),d.onload=function(){var e=d.contentWindow||d.contentDocument.parentWindow||document.parentWindow;e.focus()},document.body.appendChild(d)},module.exports=e;
},{"./utils":12,"query-string":2}],6:[function(require,module,exports){
"use strict";require("./polyfills.js");var e=require("radio"),t=require("./utils"),i=require("./api"),n=require("./button"),r=require("./provider"),o=require("./token"),s=require("./session"),a;!function(a,u){a._defaults={_storage:{state:"authentiq.request_state",nonce:"authentiq.request_nonce",id_token:"authentiq.id_token",session_state:"authentiq.session_state"},direct_events:!1,provider:{provider_uri:"https://connect.authentiq.io",authorize_path:"/authorize",end_session_path:"/authorize/logout",check_session_iframe:"/authorize/iframe",client_id:"",signed_in:null},button:{response_type:"id_token",response_mode:"fragment",redirect_uri:"",scope:"",state:"",nonce:"",display:"modal",prompt:"",ui_locales:"",display_errors:"",sign_in_text:"Sign in",sign_out_text:"Sign out",sign_out_claim:"first_name name email phone_number",theme:"basic"}},"defaults"in a&&("undefined"!=typeof a.defaults.direct_events&&(a._defaults.direct_events=!0),a._defaults.provider=Object.assign({},a._defaults.provider,a.defaults.provider),a._defaults.button=Object.assign({},a._defaults.button,a.defaults.button),delete a.defaults);var d,l,_,p,c=document.querySelector(".authentiq-snippet");if(c){_=["provider","button"];for(p in _)for(d in a._defaults[_[p]])l="data-"+d.split("_").join("-"),c.hasAttribute(l)&&(a._defaults[_[p]][d]=c.getAttribute(l));c.hasAttribute("data-direct-events")&&(a._defaults.direct_events=!0)}"/"===a._defaults.provider.provider_uri.substr(-1)&&(a._defaults.provider.provider_uri=a._defaults.provider.provider_uri.slice(0,-1)),_=["authorize_path","end_session_path","check_session_iframe"];for(p in _)"/"!==a._defaults.provider[_[p]][0]&&(a._defaults.provider[_[p]]="/"+a._defaults.provider[_[p]]);if(a._defaults.provider.signed_in=/(true|yes|1)/i.test(a._defaults.provider.signed_in),a.Event=function(t){return e("aq:"+t)},a.subscribe=function(e,t){a.Event(e).subscribe(t)},a.Token=new o,a.Provider=new r,window.opener)try{window.opener.authentiq&&window.opener.authentiq.handlePopupCallback&&window.opener.authentiq.handlePopupCallback(t.getEventHistory());try{window.close()}catch(e){}return void t.on(window,"load",function(){window.close()})}catch(e){}if(window.parent&&window.parent.authentiq&&window.parent.authentiq.handleModalCallback)try{return void window.parent.authentiq.handleModalCallback(t.getEventHistory())}catch(e){}a.popup_window=u,a.handlePopupCallback=u,a.handleModalCallback=u,a.API=i,a._API=new i,a.signIn=a._API.signIn.bind(a._API),a.signOut=a.Provider.signOut,a.Button=n,a.Session=new s,a.isMobileBrowser=t.isMobileBrowser(),t.on(document,"DOMContentLoaded",function(){a.init()}),a.init=function(e,i){if("undefined"!=typeof e)new n(e,i);else{var r=document.querySelectorAll(".authentiq-button");c&&/(true|yes|1)/i.test((c.getAttribute("data-button")||"").toLowerCase())&&new n(c,i);for(var o=0,s=r.length;o<s;o++)new n(r[o],i)}t.fireEventsFromHistory()},module.exports=a}(window.authentiq=window.authentiq||{});
},{"./api":5,"./button":7,"./polyfills.js":8,"./provider":9,"./session":10,"./token":11,"./utils":12,"radio":3}],7:[function(require,module,exports){
"use strict";function t(t,c){var l,g,b,m=c||{};if("undefined"===t||!t.hasAttribute("data-authentiq-button")){if(this.id=Math.floor(9e3*Math.random())+1e3,e=window.authentiq,s=e._defaults.button,o=e._defaults._storage,n=e._defaults.provider,r=e._API,a=e.Provider,this.authorizeURL=r.authorizeURL,this.signIn=r.signIn,!h){h=!0;var v=document.querySelector(".authentiq-styles");v&&(v.innerText+=u())}d.apply(this),this.options=Object.assign({},s,m);for(l in this.options)g="data-"+l.split("_").join("-"),t.hasAttribute(g)&&(this.options[l]=t.getAttribute(g));this.options.sign_in_text===s.sign_in_text&&"script"!==t.tagName.toLowerCase()&&""!==t.innerHTML.trim()&&(this.options.sign_in_text=t.innerHTML.trim());var _=["state","nonce"];for(b in _)""===this.options[_[b]]&&(this.options[_[b]]=i.generateNonce(8)||"");if(""!==this.options.scope&&this.options.scope.indexOf("openid")===-1&&(this.options.scope+=" openid"),""===this.options.redirect_uri)this.options.response_mode="fragment",this.options.redirect_uri=window.location.href.split("#")[0];else if(!/^https?:\/\//i.test(this.options.redirect_uri)){var x="/"!==this.options.redirect_uri[0]?"/":"";this.options.redirect_uri=window.location.origin+x+this.options.redirect_uri}"script"===t.tagName.toLowerCase()?(this.scriptTag=t,this.renderButton()):this.el=t,this.el.className.indexOf("authentiq-button")===-1&&(this.el.className+=" authentiq-button"),this.options.theme&&"none"!==this.options.theme&&(this.el.className+=" authentiq-button-style "+this.options.theme+"-theme"),this.el.setAttribute("data-authentiq-button",this.id),a.isSignedIn()?p.apply(this):f.apply(this)}}var i=require("./utils"),e,s,o,n,r,a,c,h=!1,l=function(t){var i="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 27' width='30' height='27'><path id='aq-logo-bg' style='fill:"+t[3]+"' d='M30 18.4c0 .7-.4 1.4-.8 1.7l-13.6 7H14L.8 20c-.4 0-.8-1-.8-1.5v-10C0 8 .4 7.3.8 7L14 0c.4-.3 1.2-.3 1.6 0l13.6 7c.4.2.8 1 .8 1.6v9.8z'/><path id='aq-logo-a' style='fill:"+t[4]+"' d='M11 13.7c0-1.8 1.3-3.3 3-3.3s3 1.5 3 3.3c0 1.8-1.3 3.2-3 3.2s-3-1.7-3-3.5zm11.5 3H22c-.4 0-1-.2-1-.4-.3 0-.5-.4-.5-.8V7.7h-3.2V9c-.5-.5-1-.8-1.7-1-.6-.3-1.5-.5-2.3-.5-1 0-1.7.2-2.4.5-1 .3-1.6.8-2 1.3-.6.6-1 1.2-1 2-.6.7-.7 1.5-.7 2.3 0 1 0 1.7.4 2.4.2.7.6 1.4 1 2 .6.5 1.2 1 2 1.3.6.3 1.4.5 2.3.5 1 0 1.8-.2 2.5-.6.7-.3 1.2-.8 1.7-1.5.3.6.7 1 1.3 1.5.5.4 1 .6 1.8.6.5 0 1 0 1.5-.2l.5-.2v-2.8z'/></svg>";return i.replace(/"/g,"'").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\s+/g," ")},u=function(){var t,i={basic:["#895fc0","#fff","#6a3fa1","#fff","#f05023"],orange:["#f05023","#fff","#cd380e","#fff","#f05023"],grey:["#afb6bb","#333","#919aa1","#fff","#f05023"],white:["#fff","#444","#d4d4d4","#f05023","#fff"]},e="";e+=".authentiq-button-style{padding:8px 8px 8px 46px;min-height:40px;background-color:"+i.basic[0]+';background-image:url("data:image/svg+xml;charset=utf8,'+l(i.basic)+'") !important;background-size: 31px 28px !important;background-position: 8px center !important;background-repeat: no-repeat !important;color:'+i.basic[1]+';display:inline-block;border:0 none;border-radius:5px;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:600;letter-spacing:.016em}.authentiq-button-style:hover,.authentiq-button-style:focus{background-color:'+i.basic[2]+";color:"+i.basic[1]+"}";for(t in i)"basic"!=t&&(e+=".authentiq-button-style."+t+"-theme{background-color:"+i[t][0]+";color:"+i[t][1]+";"+(i.basic[3]!==i[t][3]||i.basic[4]!==i[t][4]?'background-image: url("data:image/svg+xml;charset=utf8,'+l(i[t])+'") !important;':"")+"}.authentiq-button-style."+t+"-theme:hover,.authentiq-button-style."+t+"-theme:focus{background-color:"+i[t][2]+";color:"+i[t][1]+"}");return e},p=function(t){t=t||{};var e,s=this.options.sign_out_claim.split(" "),o=this.options.sign_out_text;for(e in s)if(t[s[e]]){o+=" "+t[s[e]];break}this.el.innerHTML=o,i.off(this.el,"click",a.signOut,this),i.off(this.el,"click",r.signIn,this),i.on(this.el,"click",a.signOut,this)},f=function(){this.el.innerHTML=this.options.sign_in_text,i.off(this.el,"click",a.signOut,this),i.off(this.el,"click",r.signIn,this),i.on(this.el,"click",r.signIn,this)},d=function(){e.Event("profile").subscribe([p,this]),e.Event("concluded").subscribe([f,this])};t.prototype.renderButton=function(){this.el=document.createElement("button"),this.scriptTag.parentNode.insertBefore(this.el,this.scriptTag)},module.exports=t;
},{"./utils":12}],8:[function(require,module,exports){
var t=require("./utils"),o;if(Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var o=0;o<this.length;o++)if(this[o]===t)return o;return-1}),"object"!=typeof window||"object"!=typeof window.location||window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),Function.prototype.bind||(Function.prototype.bind=function(t){function o(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=[].slice,r=e.call(arguments,1),n=this,i=function(){return n.apply(this instanceof o?this:t||window,r.concat(e.call(arguments)))};return o.prototype=this.prototype,i.prototype=new o,i}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var o=Object(t),e=1;e<arguments.length;e++){var r=arguments[e];if(void 0!==r&&null!==r){r=Object(r);for(var n=Object.keys(Object(r)),i=0,c=n.length;i<c;i++){var a=n[i],d=Object.getOwnPropertyDescriptor(r,a);void 0!==d&&d.enumerable&&(o[a]=r[a])}}}return o}}),!window.btoa){var e={};e.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e.encode=function(t,o){o="undefined"!=typeof o&&o;var r,n,i,c,a,d,f,l,p,h,u,w=[],g="",s=e.code;if(h=o?Utf8.encode(t):t,p=h.length%3,p>0)for(;p++<3;)g+="=",h+="\0";for(p=0;p<h.length;p+=3)r=h.charCodeAt(p),n=h.charCodeAt(p+1),i=h.charCodeAt(p+2),c=r<<16|n<<8|i,a=c>>18&63,d=c>>12&63,f=c>>6&63,l=63&c,w[p/3]=s.charAt(a)+s.charAt(d)+s.charAt(f)+s.charAt(l);return u=w.join(""),u=u.slice(0,u.length-g.length)+g},e.decode=function(t,o){o="undefined"!=typeof o&&o;var r,n,i,c,a,d,f,l,p,h,u=[],w=e.code;h=o?Utf8.decode(t):t;for(var g=0;g<h.length;g+=4)c=w.indexOf(h.charAt(g)),a=w.indexOf(h.charAt(g+1)),d=w.indexOf(h.charAt(g+2)),f=w.indexOf(h.charAt(g+3)),l=c<<18|a<<12|d<<6|f,r=l>>>16&255,n=l>>>8&255,i=255&l,u[g/4]=String.fromCharCode(r,n,i),64==f&&(u[g/4]=String.fromCharCode(r,n)),64==d&&(u[g/4]=String.fromCharCode(r));return p=u.join(""),o?Utf8.decode(p):p},window.btoa=e.encode,window.atob=e.decode}if("object"==typeof localStorage)try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(t){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){}}
},{"./utils":12}],9:[function(require,module,exports){
"use strict";function e(e){o=window.authentiq,a=o._defaults._storage,i=o.Token,r=o.Event,u.call(this),r("profile").subscribe([this.updateBindedElements,this]),this.profile()}var t=require("query-string"),n=require("./utils"),o,i,r,a,d,s,c,u=function(){var e,o,r,d,s=["hash","search"];for(var c in s)if(location[s[c]])if(e=t.parse(location[s[c]])||{},"error"in e)n.addEventInHistory("error",{error:e.error,error_description:e.error_description||null});else if("state"in e&&("id_token"in e||"access_token"in e||"code"in e)){o=localStorage.getItem(a.state),e.state===o?(i.setSessionState(e.session_state),"id_token"in e&&(r=localStorage.getItem(a.nonce),d=p(e.id_token),"undefined"!=typeof d&&(i.setIDToken(e.id_token),n.addEventInHistory("authorized:id_token",e.id_token),"undefined"!=typeof d.nonce&&d.nonce==r||n.addEventInHistory("error",{error:"client_error",error_description:"Invalid nonce in ID Token."}))),"token_type"in e&&"access_token"in e&&n.addEventInHistory("authorized:access_token",{token_type:e.token_type,access_token:e.access_token,expires_in:parseInt(e.expires_in,0)||0}),"code"in e&&n.addEventInHistory("authorized:code",e.code),n.addEventInHistory("authorized",e)):n.addEventInHistory("error",{error:"client_error",error_description:"Invalid state in authorization response."}),localStorage.removeItem(a.state),localStorage.removeItem(a.nonce),"hash"==s[c]&&l();break}},l=function(){var e,t,n=window.location;"pushState"in history?history.replaceState("",document.title,n.pathname+n.search):(e=document.body.scrollTop,t=document.body.scrollLeft,n.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)},p=function(e){var t=e?n.decodeJWT(e):void 0;return t?t.payload:void 0},f=function(){if("undefined"==typeof s&&(s=p(i.getIDToken()),"undefined"!=typeof s)){c=s.exp||void 0;var e=["iss","aud","exp","iat","nbf","auth_time","nonce","acr","amr","azp","jti","at_hash","idp","_claim_names","_claim_sources"];e.forEach(function(e){delete s[e]})}if("undefined"!=typeof s){var t=Math.floor(+new Date/1e3);if("undefined"==typeof c||t>=c)return this.signOut(),void y()}return s},y=function(){"undefined"!=typeof o.Session&&o.Session.revokeAccess.apply(o.Session)};e.prototype.isSignedIn=function(){var e=o._defaults.provider.signed_in||!1;return e||!!f.apply(this)},e.prototype.profile=function(){var e=f.apply(this);return"undefined"!=typeof e&&n.addEventInHistory("profile",e),e},e.prototype.updateBindedElements=function(){var e,t,n,o=f.apply(this);for(e=document.querySelectorAll("[data-authentiq-profile-bind]"),t=0;t<e.length;++t)n=e[t].dataset.authentiqProfileBind||"",o[n]&&("undefined"!=typeof e[t].value?e[t].value=o[n]:e[t].innerHTML=o[n])},e.prototype.signOut=function(e){"undefined"!=typeof e&&(e.preventDefault(),y()),i.destroy(),s=void 0,r("concluded").broadcast()},module.exports=e;
},{"./utils":12,"query-string":2}],10:[function(require,module,exports){
"use strict";function e(){i=window.authentiq,this.init(),i.Event("concluded").subscribe([this.destroy,this])}var t=require("./utils"),i,n,o,s,r,c=["concluded"],d;e.prototype.init=function(){if(i.Provider.isSignedIn()&&i.Token.getSessionState()){i.Event("profile").unsubscribe(this.init),n=i._defaults.provider,o=i.Token;var e=document.createElement("a");e.setAttribute("href",n.provider_uri),r=e.origin,d=this.renderOPFrame().contentWindow,t.on(window,"message",this.receiveMessage,this)}else i.Event("profile").unsubscribe(this.init).subscribe([this.init,this])},e.prototype.destroy=function(){t.off(window,"message",this.receiveMessage,this),this.init()},e.prototype.renderOPFrame=function(){var e,i,o=this.postMessage;if(i=document.querySelector(".opframe"))return i.src=n.provider_uri+n.check_session_iframe,i;e=document.createElement("iframe"),e.setAttribute("frameBorder","0"),e.style.display="none",e.onload=function(){d=this.contentWindow,o()},e.className="opframe",e.src=n.provider_uri+n.check_session_iframe;try{document.body.appendChild(e)}catch(i){t.on(document,"DOMContentLoaded",function(){(document.body||document.documentElement).appendChild(e)})}return e},e.prototype.revokeAccess=function(){this.postMessage("concluded")},e.prototype.postMessage=function(e){if(i.Provider.isSignedIn()&&n.client_id){var t=n.client_id+" "+o.getSessionState();"undefined"!=typeof e&&c.indexOf(e)>-1&&(t+=" "+e);try{d.postMessage(t,r)}catch(e){}}},e.prototype.receiveMessage=function(e){var t;e.origin===r&&e.source==d&&(t=e.data,"changed"===t||"concluded"===t&&i.Provider.signOut())},module.exports=e;
},{"./utils":12}],11:[function(require,module,exports){
"use strict";function t(){o=window.authentiq,s=o._defaults._storage}var e=require("./utils"),o,s,n;t.prototype.setIDToken=function(t){localStorage.setItem(s.id_token,t)},t.prototype.getIDToken=function(){return localStorage.getItem(s.id_token)||void 0},t.prototype.setSessionState=function(t){localStorage.setItem(s.session_state,t)},t.prototype.getSessionState=function(){return localStorage.getItem(s.session_state)||void 0},t.prototype.destroy=function(){localStorage.removeItem(s.id_token),localStorage.removeItem(s.session_state)},module.exports=t;
},{"./utils":12}],12:[function(require,module,exports){
function e(e){return btoa(unescape(encodeURIComponent(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/,"")}function t(e){return e+=Array(5-(e.length%4||4)).join("="),e=e.replace(/\-/g,"+").replace(/_/g,"/"),decodeURIComponent(escape(atob(e)))}var n=require("radio"),a,o,i={},r=[];module.exports={log:function(){},on:function(e,t,n,a){var o,r=a?function(e){n.apply(a,[e])}:n;o="getAttribute"in e?e.getAttribute("data-authentiq-button"):e,"undefined"!=typeof o&&("undefined"==typeof i[t]&&(i[t]={}),"undefined"==typeof i[t][o]&&(i[t][o]={}),i[t][o][n]=r),document.addEventListener?e.addEventListener(t,r,!1):document.attachEvent&&e.attachEvent("on"+t,r)},off:function(e,t,n,a){var o,r;o="getAttribute"in e?e.getAttribute("data-authentiq-button"):e,"undefined"!=typeof i[t]&&"undefined"!=typeof i[t][o]&&"undefined"!=typeof i[t][o][n]&&(r=i[t][o][n],document.removeEventListener?e.removeEventListener(t,r,!1):document.detachEvent&&e.detachEvent("on"+t,r),delete i[t][o][n])},addEventInHistory:function(e,t){if(e="aq:"+e,authentiq._defaults.direct_events&&!(window.parent&&window.parent.authentiq&&window.parent.authentiq.handleModalCallback)&&!(window.opener&&window.opener.authentiq&&window.opener.authentiq.handlePopupCallback))return void n(e).broadcast(t);var a={name:e,data:t};r.push(a)},setEventHistory:function(e){r=e},getEventHistory:function(){return r},fireEventsFromHistory:function(){if(r.length>0)for(var e in r)n(r[e].name).broadcast(r[e].data);r=[]},generateNonce:function(t){var n=window.crypto||window.msCrypto;if(n&&"function"==typeof n.getRandomValues&&("function"==typeof Uint8Array||"object"==typeof Uint8Array)){var a=new Uint8Array(t||16);n.getRandomValues(a);var o=Array.prototype.map.call(a,function(e){return String.fromCharCode(e)}).join("");return e(o)}},decodeJWT:function(e){var a=e?e.split("."):[];if(3!==a.length)return void n("aq:error").broadcast({error:"client_error",error_description:"Failed to decode ID Token."});var o=a[0],i=a[1],r=a[2],c=JSON.parse(t(o))||void 0,d=JSON.parse(t(i))||void 0;return{header:c,payload:d,signature:r}},hasClass:function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},isMobileBrowser:function(){var e=navigator.userAgent||navigator.vendor||window.opera,t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,n=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;return t.test(e)||n.test(e.substr(0,4))}};
},{"radio":3}]},{},[6]);
